{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport let perPage = 15;\nimport { page } from '../main';\n\nexport async function getPictures(query, currentPage){\n    const BASE_URL = 'https://pixabay.com/api/'\n    const params = new URLSearchParams({\n        key: '42978821-e3c6f538b5791c0a766c3ba19',\n        q: query,\n        image_type: 'photo', \n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: perPage\n    })\n    const url = `${BASE_URL}?${params}`;\n\n    const images = await axios.get(url)\n    .then(response => response.data.hits)\n    .catch(error => console.log(error))\n\n    return images;\n}","export function renderElement({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n    return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href= ${largeImageURL}>  \n            <img class=\"gallery-image\"\n                src= \"${webformatURL}\"\n                alt = \"${tags}\"\n            />\n        </a>\n        <div class=\"container\"><h3 class=\"header\">Likes\n            <p class=\"views\">${likes}</p>\n        </h3>\n        <h3 class=\"header\">Views\n        <p class=\"views\">${views}</p>\n        </h3>\n        <h3 class=\"header\">Comments\n        <p class=\"views\">${comments}</p>\n        </h3>\n        <h3 class=\"header\">Downloads\n        <p class=\"views\">${downloads}</p>\n        </h3>\n        </div>\n        \n    </li>`\n    }\n    \n    export function renderElements(arr) {\n    return arr.map(renderElement).join('');\n    }","\n// import './js/pixabay-api.js'\n// import './js/render-functions.js'\nimport { getPictures } from './js/pixabay-api.js';\nimport { renderElement } from './js/render-functions.js';\nimport { renderElements } from './js/render-functions.js';\nimport { perPage } from './js/pixabay-api.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport css from './css/styles.css'\n\nconst form = document.querySelector('.form')\nconst button = document.querySelector('#search')\nconst gallery = document.querySelector('.gallery')\nconst loadBtn = document.querySelector('.load-btn')\n\nexport let page;\nlet inputValue = '';\n\n\n\nconsole.trace()\nhideLoadBtn()\n\n\nform.addEventListener('submit', handleSubmit)\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    inputValue = event.currentTarget.elements.input.value.trim();\n    gallery.innerHTML = '';\n    page = 1;\n    if(!inputValue){\n    \n        iziToast.warning({\n            title: 'Caution',\n            message: 'You forgot to fill in the form!',\n            position: 'topCenter'\n        });\n        return;\n    }\n    showLoader()\n    try{\n        const images = await getPictures(inputValue)\n        hideLoader()\n        if(images.length === 0) {\n            iziToast.error({\n                title: 'Search result',\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n                position: 'topCenter'\n            });\n            return;\n        }\n        const markup = renderElements(images);\n        gallery.innerHTML = markup;\n\n        initializeSlider()\n\n        showLoadBtn()\n    }\n    catch(error) {\n        hideLoader();\n        if(error.name === \"TypeError\" && error.message.includes(\"Failed to fetch\")){\n            iziToast.error({\n                title: 'Network Error',\n                message: 'Unable to connect. Please check your internet connection and try again.',\n                position: 'topCenter'\n            })\n        }else {\n            iziToast.error({\n            title: 'Error',\n            message: `Error: ${error.message}`,\n            position: 'topCenter'\n        });\n        }\n    }\n\n    form.reset()\n}\n\nloadBtn.addEventListener('click', handleMore)\n\nasync function handleMore(event) {\n    page += 1;\n    showLoader()\n    try{\n        const newImages = await getPictures(inputValue, page)\n        const markup = renderElements(newImages);\n        gallery.insertAdjacentHTML('beforeend', markup)\n        initializeSlider()\n        myScroll()\n        hideLoader()\n        \n\n        if (newImages.length < perPage){\n            iziToast.warning({\n                title: 'End of Results',\n                message: `We're sorry, but you've reached the end of search results.`,\n                position: 'topCenter',\n            });\n        loadBtn.style.display = 'none';\n    }\n    }catch(error) {\n        iziToast.error({\n            color: 'red',\n            message: `âŒ Error fetching more images: ${error.message}`,\n            position: 'topCenter',\n        });\n    }finally {\n        hideLoader();\n    }\n};\n\nfunction showLoader() {\n    \n    let existingLoader = document.querySelector('.loader')\n    if(!existingLoader){\n        const loader = document.createElement('div');\n        loader.className = 'loader';\n        form.insertAdjacentElement('afterend', loader)\n    }\n    \n}\n\nfunction hideLoader() {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.remove();\n    }\n}\n\nfunction hideLoadBtn(){\n    loadBtn.style.display = 'none';\n}\n\nfunction showLoadBtn(){\n    loadBtn.style.display = 'flex';\n}\n\nfunction myScroll() {\n    const card = document.querySelector('.gallery-item')\n    const cardParams = card.getBoundingClientRect().height;     \n    window.scrollBy({\n        top: cardParams * 2,\n        behavior: 'smooth'\n    })\n}\n\nfunction initializeSlider(){\n    let gallerySlider = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n    }).refresh()\n}\n\n"],"names":["perPage","getPictures","query","currentPage","BASE_URL","params","url","axios","response","error","renderElement","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderElements","arr","form","gallery","loadBtn","page","inputValue","hideLoadBtn","handleSubmit","event","iziToast","showLoader","images","hideLoader","markup","initializeSlider","showLoadBtn","handleMore","newImages","myScroll","loader","cardParams","SimpleLightbox"],"mappings":"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"}